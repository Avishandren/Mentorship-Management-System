<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentor Application</title>
</head>
<body>
    <h1>Mentor Application</h1>
    <form id="mentor-application-form">
        <!-- Example Questions (You should replace these with your actual questions) -->
        <label for="question1">Question 1: Educational background and qualifications?</label>
        <input type="text" name="question1" id="question1" required><br><br>

        <label for="question2">Question 2: What subjects would you like to mentor in?</label>
        <input type="text" name="question2" id="question2" required><br><br>

        <label for="question3">Question 3: How many hours can you commit per week?</label>
        <input type="text" name="question3" id="question3" required><br><br>

        <label for="question4">Question 4: Do you have prior mentoring experience?</label>
        <input type="text" name="question4" id="question4" required><br><br>

        <label for="question5">Question 5: Why do you want to be a mentor?</label>
        <input type="text" name="question5" id="question5" required><br><br>

        <label for="question6">Question 6: How do you approach teaching?</label>
        <input type="text" name="question6" id="question6" required><br><br>

        <label for="question7">Question 7: What challenges do you anticipate in mentoring?</label>
        <input type="text" name="question7" id="question7" required><br><br>

        <label for="question8">Question 8: What skills or expertise do you bring as a mentor?</label>
        <input type="text" name="question8" id="question8" required><br><br>

        <label for="question9">Question 9: Describe your experience as a student.</label>
        <input type="text" name="question9" id="question9" required><br><br>

        <label for="question10">Question 10: Any additional comments?</label>
        <input type="text" name="question10" id="question10" required><br><br>

        <button type="submit">Submit Application</button>
    </form>

    <script>
        document.getElementById("mentor-application-form").addEventListener("submit", function(event) {
            event.preventDefault();

            // Collect the answers to the form
            var formData = {
                student_id: "{{ student.id }}",  // Include the student ID from Flask
                question1: document.querySelector('[name="question1"]').value,
                question2: document.querySelector('[name="question2"]').value,
                question3: document.querySelector('[name="question3"]').value,
                question4: document.querySelector('[name="question4"]').value,
                question5: document.querySelector('[name="question5"]').value,
                question6: document.querySelector('[name="question6"]').value,
                question7: document.querySelector('[name="question7"]').value,
                question8: document.querySelector('[name="question8"]').value,
                question9: document.querySelector('[name="question9"]').value,
                question10: document.querySelector('[name="question10"]').value
            };

            // Send the data to the server (using AJAX)
            fetch('/submit_application', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("Your mentor application has been submitted successfully!");
                    window.location.href = "/application_success";  // Redirect to a success page
                } else {
                    alert("There was an error submitting your application. Please try again.");
                }
            })
            .catch(error => {
                console.error("Error:", error);  // Log the error for debugging
                alert("An error occurred. Please try again.");
            });
        });
    </script>
</body>
</html>
